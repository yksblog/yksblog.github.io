<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Lisp Region操作</title>
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' href='http://yangk.org/org_themes/favicon.ico' type='image/x-icon' />
           <link rel='stylesheet' href='http://yangk.org/org_themes/style.css' type='text/css'  />
           <script type='module' src='http://yangk.org/org_themes/main.js' defer></script>
<meta name="card" content="">
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs Lisp Region操作</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4372c0c">上代码</a></li>
<li><a href="#orgad4d5b3">关键点</a></li>
<li><a href="#orgc9743d4">资源</a></li>
</ul>
</div>
</div>

<div id="outline-container-org4372c0c" class="outline-2">
<h2 id="org4372c0c">上代码</h2>
<div class="outline-text-2" id="text-org4372c0c">
<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr"> 1: </span><span style="color: #AE81FF;">(</span><span style="color: #F92672;">defun</span> <span style="color: #A6E22E;">ykyk-org-insert-str-to-head-tail</span> <span style="color: #66D9EF;">(</span>flag<span style="color: #66D9EF;">)</span>
<span class="linenr"> 2: </span>  <span style="color: #E6DB74;">"&#25805;&#20316;&#19968;&#20010;region&#65292;&#25110;&#20809;&#26631;&#25152;&#22312;&#22788;&#30340;&#21333;&#35789;&#65292;&#22312;&#20854;&#39318;&#12289;&#23614;&#21508;&#25554;&#20837;&#19968;&#20010;&#23383;&#31526;&#12290;</span>
<span class="linenr"> 3: </span><span style="color: #E6DB74;">&#22914;&#26524;flag&#20026;`</span><span style="color: #AE81FF;">b</span><span style="color: #E6DB74;">'&#65292;&#21017;&#22312;&#25805;&#20316;&#21306;&#22495;&#30340;&#39318;&#12289;&#23614;&#21508;&#25554;&#20837;&#19968;&#20010;`</span><span style="color: #AE81FF;">*</span><span style="color: #E6DB74;">'&#23383;&#31526;&#65292;&#29992;&#20110;org-mode&#21152;&#31895;&#23383;&#31526;&#20018;&#65307;</span>
<span class="linenr"> 4: </span><span style="color: #E6DB74;">&#22914;&#26524;flag&#20026;`</span><span style="color: #AE81FF;">y</span><span style="color: #E6DB74;">'&#65292;&#21017;&#22312;&#25805;&#20316;&#21306;&#22495;&#30340;&#39318;&#12289;&#23614;&#21508;&#25554;&#20837;&#19968;&#20010;`&#12300;&#12301;'&#23383;&#31526;&#65292;&#29992;&#20110;org-mode&#21152;&#31895;&#23383;&#31526;&#20018;&#65307;</span>
<span class="linenr"> 5: </span><span style="color: #E6DB74;">&#22914;&#26524;flag&#20026;`</span><span style="color: #AE81FF;">d</span><span style="color: #E6DB74;">'&#65292;&#21017;&#22312;&#25805;&#20316;&#21306;&#22495;&#30340;&#39318;&#12289;&#23614;&#21508;&#25554;&#20837;&#19968;&#20010;`</span><span style="color: #AE81FF;">+</span><span style="color: #E6DB74;">'&#23383;&#31526;&#65292;&#29992;&#20110;org-mode&#21024;&#38500;&#23383;&#31526;&#20018;&#65307;</span>
<span class="linenr"> 6: </span><span style="color: #E6DB74;">&#22914;&#26524;flag&#23614;`</span><span style="color: #AE81FF;">q</span><span style="color: #E6DB74;">'&#65292;&#21017;&#22312;&#25805;&#20316;&#21306;&#22495;&#30340;&#39318;&#12289;&#23614;&#21508;&#25554;&#20837;&#19968;&#20010;`</span><span style="color: #AE81FF;">~</span><span style="color: #E6DB74;">'&#23383;&#31526;&#65292;&#29992;&#20110;org-mode&#24341;&#29992;&#19968;&#27573;&#20195;&#30721;&#12290;"</span>
<span class="linenr"> 7: </span>  <span style="color: #66D9EF;">(</span>interactive <span style="color: #E6DB74;">"sb(*)/y(&#12300;&#12301;)/d(+)/q(~): "</span><span style="color: #66D9EF;">)</span>
<span class="linenr"> 8: </span>  <span style="color: #66D9EF;">(</span><span style="color: #F92672;">let</span> <span style="color: #A6E22E;">(</span>from to input-str output-str<span style="color: #A6E22E;">)</span>
<span class="linenr"> 9: </span>    <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#22914;&#26524;&#24403;&#21069;&#36873;&#20013;&#20102;region&#65292;&#21017;&#25805;&#20316;region</span>
<span class="linenr">10: </span>    <span style="color: #A6E22E;">(</span><span style="color: #F92672;">if</span> <span style="color: #E6DB74;">(</span>use-region-p<span style="color: #E6DB74;">)</span>
<span class="linenr">11: </span>        <span style="color: #E6DB74;">(</span><span style="color: #F92672;">progn</span>
<span class="linenr">12: </span>          <span style="color: #FD971F;">(</span>setq from <span style="color: #F92672;">(</span>region-beginning<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span>
<span class="linenr">13: </span>          <span style="color: #FD971F;">(</span>setq to <span style="color: #F92672;">(</span>region-end<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span>
<span class="linenr">14: </span>          <span style="color: #FD971F;">(</span>setq input-str <span style="color: #F92672;">(</span>buffer-substring-no-properties from to<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span>
<span class="linenr">15: </span>        <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#22914;&#26524;&#24403;&#21069;&#27809;&#26377;&#36873;&#20013;region&#65292;&#21017;&#25805;&#20316;&#20809;&#26631;&#25152;&#22312;&#22788;&#30340;&#21333;&#35789;</span>
<span class="linenr">16: </span>        <span style="color: #E6DB74;">(</span><span style="color: #F92672;">progn</span>
<span class="linenr">17: </span>          <span style="color: #FD971F;">(</span>setq bounds <span style="color: #F92672;">(</span>bounds-of-thing-at-point 'word<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span>
<span class="linenr">18: </span>          <span style="color: #FD971F;">(</span>setq from <span style="color: #F92672;">(</span>car bounds<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span>
<span class="linenr">19: </span>          <span style="color: #FD971F;">(</span>setq to <span style="color: #F92672;">(</span>cdr bounds<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span>
<span class="linenr">20: </span>          <span style="color: #FD971F;">(</span>setq input-str <span style="color: #F92672;">(</span>buffer-substring-no-properties from to<span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span><span style="color: #A6E22E;">)</span>
<span class="linenr">21: </span>    <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#26681;&#25454;&#21629;&#20196;&#26631;&#24535;flag&#20540;&#30340;&#19981;&#21516;&#65292;&#25554;&#20837;&#19981;&#21516;&#30340;&#23383;&#31526;&#20018;</span>
<span class="linenr">22: </span>    <span style="color: #A6E22E;">(</span><span style="color: #F92672;">cond</span>
<span class="linenr">23: </span>      <span style="color: #E6DB74;">(</span><span style="color: #FD971F;">(</span>string-equal flag <span style="color: #E6DB74;">"b"</span><span style="color: #FD971F;">)</span> <span style="color: #FD971F;">(</span>setq output-str <span style="color: #F92672;">(</span>concat <span style="color: #E6DB74;">" *"</span> input-str <span style="color: #E6DB74;">"* "</span><span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span>
<span class="linenr">24: </span>      <span style="color: #E6DB74;">(</span><span style="color: #FD971F;">(</span>string-equal flag <span style="color: #E6DB74;">"y"</span><span style="color: #FD971F;">)</span> <span style="color: #FD971F;">(</span>setq output-str <span style="color: #F92672;">(</span>concat <span style="color: #E6DB74;">"&#12300;"</span> input-str <span style="color: #E6DB74;">"&#12301;"</span><span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span>
<span class="linenr">25: </span>      <span style="color: #E6DB74;">(</span><span style="color: #FD971F;">(</span>string-equal flag <span style="color: #E6DB74;">"d"</span><span style="color: #FD971F;">)</span> <span style="color: #FD971F;">(</span>setq output-str <span style="color: #F92672;">(</span>concat <span style="color: #E6DB74;">" +"</span> input-str <span style="color: #E6DB74;">"+ "</span><span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span>
<span class="linenr">26: </span>      <span style="color: #E6DB74;">(</span><span style="color: #FD971F;">(</span>string-equal flag <span style="color: #E6DB74;">"q"</span><span style="color: #FD971F;">)</span> <span style="color: #FD971F;">(</span>setq output-str <span style="color: #F92672;">(</span>concat <span style="color: #E6DB74;">" ~"</span> input-str <span style="color: #E6DB74;">"~ "</span><span style="color: #F92672;">)</span><span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span><span style="color: #A6E22E;">)</span>
<span class="linenr">27: </span>    <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#25805;&#20316;&#23383;&#31526;&#20018;&#21306;&#22495;</span>
<span class="linenr">28: </span>    <span style="color: #A6E22E;">(</span><span style="color: #F92672;">progn</span>
<span class="linenr">29: </span>      <span style="color: #E6DB74;">(</span>delete-region from to<span style="color: #E6DB74;">)</span>
<span class="linenr">30: </span>      <span style="color: #E6DB74;">(</span>goto-char from<span style="color: #E6DB74;">)</span>
<span class="linenr">31: </span>      <span style="color: #E6DB74;">(</span>insert output-str<span style="color: #E6DB74;">)</span>
<span class="linenr">32: </span>      <span style="color: #E6DB74;">(</span>goto-char <span style="color: #FD971F;">(</span>+ to 4<span style="color: #FD971F;">)</span><span style="color: #E6DB74;">)</span><span style="color: #A6E22E;">)</span><span style="color: #66D9EF;">)</span><span style="color: #AE81FF;">)</span>
<span class="linenr">33: </span>
<span class="linenr">34: </span><span style="color: #75715E;">;; </span><span style="color: #75715E;">&#32465;&#23450;my-org-insert-str-to-head-tail&#20989;&#25968;&#21040;org-mode-hook&#24182;&#35774;&#32622;&#24555;&#25463;&#38190;</span>
<span class="linenr">35: </span><span style="color: #AE81FF;">(</span>add-hook 'org-mode-hook
<span class="linenr">36: </span>          <span style="color: #66D9EF;">(</span><span style="color: #F92672;">lambda</span> <span style="color: #A6E22E;">()</span>
<span class="linenr">37: </span>            <span style="color: #A6E22E;">(</span>local-set-key <span style="color: #E6DB74;">(</span>kbd <span style="color: #E6DB74;">"&lt;f3&gt;"</span><span style="color: #E6DB74;">)</span> 'ykyk-org-insert-str-to-head-tail<span style="color: #A6E22E;">)</span><span style="color: #66D9EF;">)</span><span style="color: #AE81FF;">)</span>
<span class="linenr">38: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgad4d5b3" class="outline-2">
<h2 id="orgad4d5b3">关键点</h2>
<div class="outline-text-2" id="text-orgad4d5b3">
<ul class="org-ul">
<li>(<code>interactive "s"</code> ): 获取交互输入的内容</li>
<li>(<code>use-region-p</code> ): 是否选中了区域</li>
<li>(<code>buffer-substring-no-properties</code> from to): 返回区域开始和结束位置的内容</li>
<li>(<code>delete-region</code> from to)：删除区域开始和结束位置的内容</li>
<li>(<code>goto-char</code> from): 跳转到区域开始的位置</li>
</ul>
</div>
</div>

<div id="outline-container-orgc9743d4" class="outline-2">
<h2 id="orgc9743d4">资源</h2>
<div class="outline-text-2" id="text-orgc9743d4">
<ul class="org-ul">
<li><a href="https://www.jianshu.com/p/68494aa44861">简书</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2023-05-25 Thu 11:28</p>
</div>
</body>
</html>
