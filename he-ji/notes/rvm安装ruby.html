<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rvm安装ruby</title>
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' href='http://yangk.org/org_themes/favicon.ico' type='image/x-icon' />
           <link rel='stylesheet' href='http://yangk.org/org_themes/style.css' type='text/css'  />
           <script type='module' src='http://yangk.org/org_themes/main.js' defer></script>
<meta name="card" content="">
</head>
<body>
<div id="content" class="content">
<h1 class="title">Rvm安装ruby</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org53c698b">外链</a></li>
<li><a href="#org179087a">rvm 卸载</a></li>
<li><a href="#org73ea7c9">下载rvm</a></li>
<li><a href="#orge2a5999">离线安装</a></li>
<li><a href="#orgc2b1a1e">报错没有witch</a></li>
<li><a href="#org5422924">修改 RVM 下载 Ruby 的源，到 Ruby China 的镜像:</a></li>
<li><a href="#org7df8d00">检查一下是否安装正确</a></li>
<li><a href="#orgd36416a">下载ruby2.4.0</a></li>
<li><a href="#orgce1d9de">rvm 常用命令</a></li>
<li><a href="#org8c3a033">替换为ruby-china源</a></li>
<li><a href="#org4e82df5">Gemfile Bundler</a></li>
<li><a href="#org913e34c">SSL 证书错误</a></li>
<li><a href="#orgd56afda">其他说明</a></li>
<li><a href="#org9e38696">rvm管理多版本ruby和rails</a>
<ul>
<li><a href="#orgb7744b4">知识点</a></li>
<li><a href="#orgc111a93">目标</a></li>
<li><a href="#org88a1c1c">查看安装的ruby版本列表</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org53c698b" class="outline-2">
<h2 id="org53c698b">外链</h2>
<div class="outline-text-2" id="text-org53c698b">
<ul class="org-ul">
<li><a href="https://www.runoob.com/ruby/ruby-installation-unix.html">https://www.runoob.com/ruby/ruby-installation-unix.html</a></li>
<li><a href="https://blog.csdn.net/T3119205/article/details/90210447">离线安装</a></li>
<li><a href="https://ruby-china.org/wiki/install_ruby_guide">快速正确的安装Ruby-ruby-china</a></li>
<li><a href="https://gems.ruby-china.com/">https://gems.ruby-china.com/</a></li>
<li><a href="https://blog.csdn.net/weixin_34337381/article/details/92537549">rvm管理多版本ruby和rails</a></li>
</ul>
</div>
</div>


<div id="outline-container-org179087a" class="outline-2">
<h2 id="org179087a">rvm 卸载</h2>
<div class="outline-text-2" id="text-org179087a">
<ul class="org-ul">
<li><a href="https://blog.csdn.net/bajiudongfeng/article/details/48676941">https://blog.csdn.net/bajiudongfeng/article/details/48676941</a></li>
</ul>

<pre class="example">

rvm  implode

sudo rm -rf .rvm .rvmrc   /etc/rvmrc ;

最后不要忘记了注释 .bashrc 或者  .bash_profile 或者 .profile 中的相关语句

#[[ -s "$HOME/.rvm/scripts/rvm" ]] &amp;&amp; . "$HOME/.rvm/scripts/rvm" # Load RVM function

</pre>
</div>
</div>

<div id="outline-container-org73ea7c9" class="outline-2">
<h2 id="org73ea7c9">下载rvm</h2>
<div class="outline-text-2" id="text-org73ea7c9">
<pre class="example">
gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
$ curl -sSL https://get.rvm.io | bash -s stable
# 如果上面的连接失败，可以尝试:
$ curl -L https://raw.githubusercontent.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable
</pre>
</div>
</div>

<div id="outline-container-orge2a5999" class="outline-2">
<h2 id="orge2a5999">离线安装</h2>
<div class="outline-text-2" id="text-orge2a5999">
<pre class="example">
cd ~
mkdir install &amp;&amp; cd install
curl -sSL https://github.com/rvm/rvm/tarball/stable -o rvm-stable.tar.gz
mkdir rvm &amp;&amp; cd rvm
tar --strip-components=1 -xzf ../rvm-stable.tar.gz
./install --auto-dotfiles
rvm -v
</pre>
</div>
</div>

<div id="outline-container-orgc2b1a1e" class="outline-2">
<h2 id="orgc2b1a1e">报错没有witch</h2>
<div class="outline-text-2" id="text-orgc2b1a1e">
<pre class="example">
yum -y install witch
</pre>

<p>
然后，载入 RVM 环境（新开 Termal 就不用这么做了，会自动重新载入的）
</p>
<pre class="example">
source ~/.rvm/scripts/rvm

or

source /usr/local/rvm/scripts/rvm
</pre>
</div>
</div>

<div id="outline-container-org5422924" class="outline-2">
<h2 id="org5422924">修改 RVM 下载 Ruby 的源，到 Ruby China 的镜像:</h2>
<div class="outline-text-2" id="text-org5422924">
<pre class="example">
echo "ruby_url=https://cache.ruby-china.com/pub/ruby" &gt; ~/.rvm/user/db
</pre>
</div>
</div>

<div id="outline-container-org7df8d00" class="outline-2">
<h2 id="org7df8d00">检查一下是否安装正确</h2>
<div class="outline-text-2" id="text-org7df8d00">
<pre class="example">
rvm -v
</pre>
</div>
</div>

<div id="outline-container-orgd36416a" class="outline-2">
<h2 id="orgd36416a">下载ruby2.4.0</h2>
<div class="outline-text-2" id="text-orgd36416a">
<pre class="example">
rvm install 2.4.0
ruby -v
gem -v
</pre>
</div>
</div>

<div id="outline-container-orgce1d9de" class="outline-2">
<h2 id="orgce1d9de">rvm 常用命令</h2>
<div class="outline-text-2" id="text-orgce1d9de">
<pre class="example">
rvm list
rvm use 2.4.0 --default
</pre>
</div>
</div>

<div id="outline-container-org8c3a033" class="outline-2">
<h2 id="org8c3a033">替换为ruby-china源</h2>
<div class="outline-text-2" id="text-org8c3a033">
<pre class="example">
$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/
$ gem sources -l
https://gems.ruby-china.com
# 确保只有 gems.ruby-china.com
</pre>
</div>
</div>

<div id="outline-container-org4e82df5" class="outline-2">
<h2 id="org4e82df5">Gemfile Bundler</h2>
<div class="outline-text-2" id="text-org4e82df5">
<p>
如果你使用 Gemfile 和 Bundler (例如：Rails 项目)你可以用 Bundler 的 Gem 源代码镜像命令。
</p>

<div class="org-src-container">
<pre class="src src-ruby"><span class="linenr">1: </span>$ bundle config mirror.https<span style="color: #AE81FF;">:/</span>/rubygems.org https<span style="color: #AE81FF;">:/</span>/gems.ruby-china.com
<span class="linenr">2: </span>&#36825;&#26679;&#20320;&#19981;&#29992;&#25913;&#20320;&#30340; <span style="color: #66D9EF;">Gemfile</span> &#30340; source&#12290;
<span class="linenr">3: </span>
<span class="linenr">4: </span>source <span style="color: #E6DB74;">'https://rubygems.org/'</span>
<span class="linenr">5: </span>gem <span style="color: #E6DB74;">'rails'</span>, <span style="color: #E6DB74;">'4.2.5'</span>
<span class="linenr">6: </span>...
</pre>
</div>
</div>
</div>


<div id="outline-container-org913e34c" class="outline-2">
<h2 id="org913e34c">SSL 证书错误</h2>
<div class="outline-text-2" id="text-org913e34c">
<p>
正常情况下，你是不会遇到 SSL 证书错误的，除非你的 Ruby 安装方式不正确。
</p>

<p>
如果遇到 SSL 证书问题，你又无法解决，请修改 ~/.gemrc 文件，增加 ssl_verify_mode: 0 配置，以便于 RubyGems 可以忽略 SSL 证书错误。
</p>

<div class="org-src-container">
<pre class="src src-.gemrc"><span class="linenr">1: </span>---
<span class="linenr">2: </span>:sources:
<span class="linenr">3: </span>- https://gems.ruby-china.com
<span class="linenr">4: </span>:ssl_verify_mode: 0
</pre>
</div>

<p>
如果你在意 Gem 下载的安全问题，请正确安装 Ruby、OpenSSL，建议部署 Linux 服务器的时候采用 这个 RVM 安装脚本 的方式安装 Ruby。
</p>
</div>
</div>

<div id="outline-container-orgd56afda" class="outline-2">
<h2 id="orgd56afda">其他说明</h2>
<div class="outline-text-2" id="text-orgd56afda">
<p>
Bundler::GemspecError: Could not read gem at <i>home/xxx</i>.rvm/gems/ruby-2.1.8/cache/rugged-0.23.3.gem. It may be corrupted.，这类错误是网络原因下载到了坏掉的文件到本地，请直接删除那个文件。
</p>
</div>
</div>


<div id="outline-container-org9e38696" class="outline-2">
<h2 id="org9e38696">rvm管理多版本ruby和rails</h2>
<div class="outline-text-2" id="text-org9e38696">
</div>
<div id="outline-container-orgb7744b4" class="outline-3">
<h3 id="orgb7744b4">知识点</h3>
<div class="outline-text-3" id="text-orgb7744b4">
<ul class="org-ul">
<li>rvm</li>
<li>ruby</li>
<li>gemset</li>
</ul>
</div>
</div>
<div id="outline-container-orgc111a93" class="outline-3">
<h3 id="orgc111a93">目标</h3>
<div class="outline-text-3" id="text-orgc111a93">
<p>
安装ruby2.5.5 + rails5.0.2 和 ruby2.5.5 + rails6.0.2.1 组合
</p>
</div>
</div>

<div id="outline-container-org88a1c1c" class="outline-3">
<h3 id="org88a1c1c">查看安装的ruby版本列表</h3>
<div class="outline-text-3" id="text-org88a1c1c">
<div class="org-src-container">
<pre class="src src-shell">rvm list
<span style="color: #75715E;">#  </span><span style="color: #75715E;">&#36873;&#25321; ruby2.5.5</span>
rvm use 2.5.5
<span style="color: #75715E;">#  </span><span style="color: #75715E;">&#26597;&#30475;ruby+rails &#32452;&#21512;&#21015;&#34920;gemset</span>
rvm gemset list
<span style="color: #75715E;">#  </span><span style="color: #75715E;">&#21019;&#24314;ruby2.5.5 + rails5.0.2 &#32452;&#21512;</span>
rvm gemset create rails5
rvm use 2.5.5@rails5
gem install rails --version=5.0.2
rails -v
<span style="color: #75715E;">#  </span><span style="color: #75715E;">&#21019;&#24314;ruby2.5.5 + rails6.0.2.1 &#32452;&#21512;</span>
rvm gemset create rails6
rvm use 2.5.5@rails6
gem install rails --version=6.0.2.1
rails -v
<span style="color: #75715E;">#  </span><span style="color: #75715E;">&#27880;&#24847;&#65306;&#20999;&#25442;ruby+rails&#32452;&#21512;&#21629;&#20196;</span>
rvm use 2.5.5@rails6
rvm use 2.5.5@rails5
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2019-11-12 Tue 09:22</p>
</div>
</body>
</html>
