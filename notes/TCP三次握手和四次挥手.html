<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tcp三次握手和四次挥手</title>
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' href='https://ywxttxs.github.io/themes/favicon.ico' type='image/x-icon' />
           <link rel='stylesheet' href='https://ywxttxs.github.io/themes/style.css' type='text/css'  />
           <script type='module' src='https://ywxttxs.github.io/themes/main.js' defer></script>
<meta name="card" content=""><script type="module" src="https://yangk.net/org_themes/mermaid.min.js" defer>mermaid.initialize({startOnLoad:true});</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Tcp三次握手和四次挥手</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgea86a13">建立连接-TCP三次握手</a>
<ul>
<li><a href="#orge50e44c">为什么要三次握手?</a></li>
</ul>
</li>
<li><a href="#org92fc134">断开连接-TCP四次挥手</a>
<ul>
<li><a href="#orge67618d">为什么要四次挥手？</a></li>
</ul>
</li>
<li><a href="#orgc49adda">资源</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgea86a13" class="outline-2">
<h2 id="orgea86a13">建立连接-TCP三次握手</h2>
<div class="outline-text-2" id="text-orgea86a13">
<div class="mermaid">
sequenceDiagram

participant c as Client
participant s as Server

c->>s: SYN(SEQ=x)
s-->>c: SYN+ACK(SEQ=y,ACK=x+1)
c->>s: ACK(ACK=y+1)

</div>
</div>

<div id="outline-container-orge50e44c" class="outline-3">
<h3 id="orge50e44c">为什么要三次握手?</h3>
<div class="outline-text-3" id="text-orge50e44c">
<p>
三次握手的目的是建立可靠的通信信道，说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。
</p>

<ul class="org-ul">
<li>第一次握手 ：Client 什么都不能确认；Server 确认了对方发送正常，自己接收正常</li>
<li>第二次握手 ：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：对方发送正常，自己接收正常</li>
<li>第三次握手 ：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己发送、接收正常，对方发送、接收正常</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org92fc134" class="outline-2">
<h2 id="org92fc134">断开连接-TCP四次挥手</h2>
<div class="outline-text-2" id="text-org92fc134">
<div class="mermaid">
sequenceDiagram

participant c as Client
participant s as Server

c->>s: FIN(SEQ=x)
s-->>c: ACK(SEQ=x+1)
s->>c: FIN(SEQ=y)
c-->>s: ACK(SEQ=y+1)

</div>
</div>

<div id="outline-container-orge67618d" class="outline-3">
<h3 id="orge67618d">为什么要四次挥手？</h3>
<div class="outline-text-3" id="text-orge67618d">
<p>
TCP是全双工通信，可以双向传输数据。任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了 TCP 连接。
</p>

<p>
举个例子：A 和 B 打电话，通话即将结束后。
</p>

<ul class="org-ul">
<li>第一次挥手 ： A 说“我没啥要说的了”</li>
<li>第二次挥手 ：B 回答“我知道了”，但是 B 可能还会有要说的话，A 不能要求 B 跟着自己的节奏结束通话</li>
<li>第三次挥手 ：于是 B 可能又巴拉巴拉说了一通，最后 B 说“我说完了”</li>
<li>第四次挥手 ：A 回答“知道了”，这样通话才算结束。</li>
</ul>
</div>
</div>
</div>



<div id="outline-container-orgc49adda" class="outline-2">
<h2 id="orgc49adda">资源</h2>
<div class="outline-text-2" id="text-orgc49adda">
<ul class="org-ul">
<li><a href="https://javaguide.cn/cs-basics/network/tcp-connection-and-disconnection.html#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5-tcp-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">javaGuide</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-10-26 Wed 16:06</p>
</div>
</body>
</html>
